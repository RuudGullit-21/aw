
#Область ПрограммныйИнтерфейс

#Область ОбработчикиСобытий

// Процедура обработчик события подписки на событие записи марки транспорта.
//
// Параметры:
//  Источник - СправочникСсылка.ItobМаркиТранспорта	 - Исходный элемент справочника.
//  Отказ	 - Булево - Признак отказа от записи.
//						Если в теле процедуры-обработчика установить данному параметру значение Истина,
//						то запись выполнена не будет.
//	ИспользоватьОбработчикЦСМ - Булево - флаг использования обработчика ЦСМ. 
//
//
Процедура ЗаписьМаркиТС(Источник, Отказ, ИспользоватьОбработчикЦСМ) Экспорт
	
	ИспользоватьОбработчикЦСМ = Истина;
	Если НЕ ItobЦентрСпутниковогоМониторинга.ЭтоКонфигурацияЦСМ() Тогда
		ItobЦентрСпутниковогоМониторингаПереопределяемый.ЗаписьМаркиТС(Источник, Отказ, ИспользоватьОбработчикЦСМ);	
	КонецЕсли; 
	
	Если ИспользоватьОбработчикЦСМ Тогда
		Если ItobОбщегоНазначения.ЭтоЗаписьОбъектаПриЗагрузкеВМоделиСервиса(Источник) Тогда
			Возврат;
		КонецЕсли;
		
		Если ОбщегоНазначения.ПодсистемаСуществует("ItobЦентрСпутниковогоМониторинга.УчетГСМ") Тогда
			Запись = РегистрыСведений["ItobСвойстваМоделиТранспортногоСредства"].СоздатьМенеджерЗаписи();
			Запись.Модель = Источник.Ссылка;
			ЗаполнитьЗначенияСвойств(Запись,Источник);
			Запись.Записать();	
		КонецЕсли; 
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти 

#КонецОбласти 