
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УстановитьЗначенияНастроек();
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытием(Отказ, ЗавершениеРаботы, ТекстПредупреждения, СтандартнаяОбработка)
	
	Оповещение = Новый ОписаниеОповещения("ВыбратьИЗакрыть", ЭтотОбъект);
	ОбщегоНазначенияКлиент.ПоказатьПодтверждениеЗакрытияФормы(Оповещение, Отказ, ЗавершениеРаботы);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Записать(Команда)
	
	ЗаписатьНастройки();
	
	Модифицированность = Ложь;
	
КонецПроцедуры

&НаКлиенте
Процедура ЗаписатьИЗакрыть(Команда)
	
	ЗаписатьНастройки();
	
	Модифицированность = Ложь;
	
	Закрыть();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ВыбратьИЗакрыть(Результат = Неопределено, ДополнительныеПараметры = Неопределено) Экспорт
	
	ЗаписатьНастройки();
	Модифицированность = Ложь;
	Закрыть();
	
КонецПроцедуры

&НаСервере
Процедура УстановитьЗначенияНастроек()
	
	стрНастроек = уатОбщегоНазначенияПовтИсп_проф.ПолучитьНастройкиВидовКонтактнойИнформации();
	
	видКонтактнойИнформацииТелефонКонтрагента     = стрНастроек.видКонтактнойИнформацииТелефонКонтрагента;
	видКонтактнойИнформацииEmailКонтрагента       = стрНастроек.видКонтактнойИнформацииEmailКонтрагента;
	видКонтактнойИнформацииТелефонКонтактногоЛица = стрНастроек.видКонтактнойИнформацииТелефонКонтактногоЛица;
	видКонтактнойИнформацииEmailКонтактногоЛица   = стрНастроек.видКонтактнойИнформацииEmailКонтактногоЛица;
	видКонтактнойИнформацииТелефонПользователя    = стрНастроек.видКонтактнойИнформацииТелефонПользователя;
	видКонтактнойИнформацииEmailПользователя      = стрНастроек.видКонтактнойИнформацииEmailПользователя;
	видКонтактнойИнформацииТелефонФизическогоЛица = стрНастроек.видКонтактнойИнформацииТелефонФизическогоЛица;
	видКонтактнойИнформацииEmailФизическогоЛица   = стрНастроек.видКонтактнойИнформацииEmailФизическогоЛица;
	
КонецПроцедуры

&НаКлиенте
Процедура ЗаписатьНастройки()
	
	стрНастройки = Новый Структура();
	
	стрНастройки.Вставить("видКонтактнойИнформацииТелефонКонтрагента",     видКонтактнойИнформацииТелефонКонтрагента);
	стрНастройки.Вставить("видКонтактнойИнформацииEmailКонтрагента",       видКонтактнойИнформацииEmailКонтрагента);
	стрНастройки.Вставить("видКонтактнойИнформацииТелефонКонтактногоЛица", видКонтактнойИнформацииТелефонКонтактногоЛица);
	стрНастройки.Вставить("видКонтактнойИнформацииEmailКонтактногоЛица",   видКонтактнойИнформацииEmailКонтактногоЛица);
	стрНастройки.Вставить("видКонтактнойИнформацииТелефонПользователя",    видКонтактнойИнформацииТелефонПользователя);
	стрНастройки.Вставить("видКонтактнойИнформацииEmailПользователя",      видКонтактнойИнформацииEmailПользователя);
	стрНастройки.Вставить("видКонтактнойИнформацииТелефонФизическогоЛица", видКонтактнойИнформацииТелефонФизическогоЛица);
	стрНастройки.Вставить("видКонтактнойИнформацииEmailФизическогоЛица",   видКонтактнойИнформацииEmailФизическогоЛица);
	
	уатОбщегоНазначения_проф.СохранитьНастройкиВидовКонтактнойИнформации(стрНастройки);
	
КонецПроцедуры

#КонецОбласти
