<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h1><font color="#000080">Обработка "Преобразование тарифов в тарифную сетку"</font></h1>
<h3>Назначение</h3>
<p class="Usual">При наличии в информационной базе большого количества тарифов с использованием отборов на закладке "Область действия" (далее по тексту - старые тарифы) рекомендуется преобразовать такие тарифы в тарифы с типом "Тарифная сетка" (далее по тексту - новые тарифы). Данная обработка предназначена для формирования <a href="Catalog.уатТарифыТС/Help"><font color="#0066cc">тарифов на транспортные услуги</font></a> с типом "Тарифная сетка" на основании старых тарифов.  Преобразование позволит существенно ускорить расчет стоимости услуг в документах. </p>
<p class="Usual">Относится к подсистеме <a href="Subsystem.уатУслуги/Help"><font color="#0066cc">"Услуги"</font></a>.</p>
<h3>Порядок использования</h3>
<ol><li>
<div>Выбрать прейскурант. Обработка тарифов ведется в пределах одного прейскуранта. </div>
</li><li>
<div>После выбора прейскуранта таблица "Тарифы" заполняется списком всех старых тарифов прейскуранта. Перезаполнить список тарифов можно также по кнопке "Загрузить тарифы". Недоступные к обработке тарифы отмечаются серым цветом. В колонке "Статус обработки" отображается причина отказа обработки. К таким тарифам относятся:</div>
<ul><li>
<div>тарифы типа "Тарифная сетка"</div>
</li><li>
<div>сложные тарифы</div>
</li><li>
<div>тарифы с методом расчета "Процентом от суммы"</div>
</li><li>
<div>тарифы с областью действия, не соответствующей ограничениям областей действия тарифных сеток. Область действия тарифной сетки ограничивается возможность использовать вид сравнения "Равно" или "Список" и запрещает использование групп отборов И, ИЛИ, НЕ. </div></li></ul></li><li>
<div>Требуемые тарифы нужно отметить флажками. Рекомендуется воспользоваться кнопкой "Установить все"</div>
</li><li>
<div>Запуск преобразования выполняется нажатием на кнопку "Создать новые тарифы". Алгоритм работы:</div>
<ul><li>
<div>по всем отмеченным старым тарифам формируются временные группировки [Услуга, Параметр выработки, Метод расчета, Условие применения фиксированного тарифа]</div>
</li><li>
<div>по каждой такой группировки создается один тариф типа "Тарифная сетка". В тарифную сетку попадают данные старых тарифов с одинаковым значением группировки [Услуга, Параметр выработки, Метод расчета, Условие применения фиксированного тарифа]</div></li></ul></li><li>
<div>После выполнения обработки колонка "Новый тариф" заполняется созданными тарифами. Созданных тарифов типа "Тарифная сетка" всегда не больше, чем старых тарифов.<br>Выдается сообщение о количестве созданных тарифов. В колонке "Статус обработки" отображается сообщение об успешном создании тарифов.</div>
</li><li>
<div>Если обрабатываемых прейскурантов несколько, то нужно выполнить пункты 1-5 по каждому прейскуранту.</div>
</li><li>
<div>Старые тарифы, по которым созданы новые, помечаются на удаление.</div></li></ol></body></html>