
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Ключ = Неопределено Или Параметры.Ключ.Пустая() Тогда
		// Создание нового объекта
		Объект.ДлинаБуфераСглаживания = 40;
		Объект.ПорогЗаправки = 10;
		Объект.ПорогСлива = 10;
		Объект.ОкноГраницыЗаправкиСлива = 3;
		Объект.ИнтервалОбъединенияМинут = 30;
		
	КонецЕсли;
    ПроверитьСортировку = Истина;
	ЗакрываемФорму = Истина;
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)
	
	Если ПроверитьСортировку Тогда
		// Проверка сортировки таблицы преобразования
		СортировкаПравильная = Истина;
		
		Для Счетчик = 1 По Объект.Показатели.Количество()-1 Цикл
			Если Объект.Показатели[Счетчик-1].Вход > Объект.Показатели[Счетчик].Вход Тогда
				СортировкаПравильная = Ложь;
				Прервать;
			
			КонецЕсли;	
		КонецЦикла;
		Если НЕ СортировкаПравильная Тогда
			ДопПараметры = Новый Структура;
			ДопПараметры.Вставить("Объект", Объект);
			ДопПараметры.Вставить("ЭтаФорма", ЭтаФорма);
			ПоказатьВопрос(Новый ОписаниеОповещения("ОтветНаВопросСортировка", ItobОбщегоНазначенияКлиент, ДопПараметры),
				"Таблицу преобразования рекомендуется отсортировать по колонке ""Вход"" по возрастанию!
				|Выполнить сортировать сейчас?", РежимДиалогаВопрос.ДаНет, 0);
			ЗакрываемФорму = Ложь;
		КонецЕсли;
	КонецЕсли;
	ПроверитьСортировку = Истина;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ПечатьГрафика(Команда)
	
	СписокПараметров = Новый СписокЗначений;
	СписокПараметров.Добавить(Объект.Ссылка, "КалибровочныйГрафик");
	
	ПараметрыОткрытия = Новый Структура;
	ПараметрыОткрытия.Вставить("СформироватьПриОткрытии", Истина);
	ПараметрыОткрытия.Вставить("СписокПараметров", СписокПараметров);
	
	ОткрытьФорму("Отчет.ItobВизуализацияКалибровочногоГрафика.Форма", 
				 ПараметрыОткрытия,, 
				 Новый УникальныйИдентификатор);
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	Отказ = Отказ ИЛИ НЕ ЗакрываемФорму;
	ЗакрываемФорму = Истина
КонецПроцедуры

#КонецОбласти
