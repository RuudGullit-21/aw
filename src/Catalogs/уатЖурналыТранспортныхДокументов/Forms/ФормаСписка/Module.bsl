
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	уатЗащищенныеФункцииСервер.уатСправочникФормаСпискаПриСозданииНаСервере(Отказ, СтандартнаяОбработка, ДопПараметрыОткрытие);
	Если Отказ тогда
		Возврат;
	КонецЕсли;
	
	Если Не ПравоДоступа("Редактирование", Метаданные.Справочники.уатЖурналыТранспортныхДокументов) Тогда 
		Элементы.ФормаИзменитьВыделенные.Видимость = Ложь;
		Элементы.СписокКонтекстноеМенюИзменитьВыделенные.Видимость = Ложь;
	КонецЕсли;
	
	// СтандартныеПодсистемы.ВерсионированиеОбъектов
    ВерсионированиеОбъектов.ПриСозданииНаСервере(ЭтотОбъект);
    // Конец СтандартныеПодсистемы.ВерсионированиеОбъектов
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	уатЗащищенныеФункцииКлиент.уатСправочникФормаСпискаПриОткрытии(Отказ, ДопПараметрыОткрытие);
	Если Отказ Тогда
		Возврат;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти


#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ИзменитьВыделенные(Команда)
	
	ГрупповоеИзменениеОбъектовКлиент.ИзменитьВыделенные(Элементы.Список, Список);
	
КонецПроцедуры

&НаКлиенте
Процедура ПечатьЖурнала(Команда)
	ТекСтрока = Элементы.Список.ТекущиеДанные;
		
	ПараметрыФормы = Новый Структура;
	Если ТекСтрока <> Неопределено Тогда
		ПараметрыФормы.Вставить("Организация", ТекСтрока.Организация);
		ПараметрыФормы.Вставить("Журнал", ТекСтрока.Ссылка);
		ПараметрыФормы.Вставить("ФормироватьПриОткрытии", Истина);
		ПараметрыФормы.Вставить("ТолькоПодписанные", Истина);
	КонецЕсли;
	
	Если ТекСтрока.ВидЖурнала = ПредопределенноеЗначение("Перечисление.уатВидыЖурналовТранспортныхДокументов.ЖурналРегистрацииРезультатовПредрейсовогоИПослерейсовогоКонтроля") Тогда
		ОткрытьФорму("Отчет.уатЖурналПредрейсовогоИПослерейсовогоКонтроляТС.Форма.ФормаОтчета", ПараметрыФормы);
	ИначеЕсли ТекСтрока.ВидЖурнала = ПредопределенноеЗначение("Перечисление.уатВидыЖурналовТранспортныхДокументов.ЖурналПредрейсовогоМедицинскогоОсмотраВодителей") Тогда
		ПараметрыФормы.Вставить("ВидКонтроля", ПредопределенноеЗначение("Перечисление.уатВидыКонтроляТранспортныхДокументов.Предрейсовый"));
		ОткрытьФорму("Отчет.уатЖурналМедицинскогоОсмотраВодителей.Форма.ФормаОтчета", ПараметрыФормы);
	ИначеЕсли ТекСтрока.ВидЖурнала = ПредопределенноеЗначение("Перечисление.уатВидыЖурналовТранспортныхДокументов.ЖурналПослерейсовогоМедицинскогоОсмотраВодителей") Тогда
		ПараметрыФормы.Вставить("ВидКонтроля", ПредопределенноеЗначение("Перечисление.уатВидыКонтроляТранспортныхДокументов.Послерейсовый"));
		ОткрытьФорму("Отчет.уатЖурналМедицинскогоОсмотраВодителей.Форма.ФормаОтчета", ПараметрыФормы);
	ИначеЕсли ТекСтрока.ВидЖурнала = ПредопределенноеЗначение("Перечисление.уатВидыЖурналовТранспортныхДокументов.ЖурналУчетаПоказанийОдометра") Тогда
		ОткрытьФорму("Отчет.уатЖурналУчетаПоказанийОдометра.Форма.ФормаОтчета", ПараметрыФормы);
	Иначе
		ОткрытьФорму("Отчет.уатЖурналПутЛистов.Форма.ФормаОтчета", ПараметрыФормы);
	КонецЕсли;
КонецПроцедуры

#КонецОбласти


