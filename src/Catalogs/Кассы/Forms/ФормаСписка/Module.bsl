
#Область ОбработчикиСобытийФормы

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Если НЕ ЗначениеЗаполнено(Организация) Тогда
		Организация = уатОбщегоНазначенияПовтИсп.ПолучитьЗначениеПоУмолчаниюПользователя(ПользователиКлиентСервер.ТекущийПользователь(), "ОсновнаяОрганизация");
	КонецЕсли;
	          
	ОбновитьЗаголовок();
	
КонецПроцедуры

#КонецОбласти


#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ОрганизацияПриИзменении(Элемент)
	
	ОбновитьЗаголовок();
	Если Не ЗначениеЗаполнено(Организация) Тогда
		Список.Отбор.Элементы.Очистить();
	Иначе
		Список.Отбор.Элементы.Очистить();
		ЭлементОтбора                  = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
		ЭлементОтбора.ЛевоеЗначение    = Новый ПолеКомпоновкиДанных("Владелец");
		ЭлементОтбора.ВидСравнения     = ВидСравненияКомпоновкиДанных.Равно;
		ЭлементОтбора.ПравоеЗначение   = Организация;
		ЭлементОтбора.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
		ЭлементОтбора.Использование    = Истина;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти


#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ОбновитьЗаголовок()
	
	ТекстНСТР = НСтр("en='List of cash funds of company %1';ru='Список касс организации %1'");
	ЭтотОбъект.Заголовок = СтрШаблон(ТекстНСТР, уатОбщегоНазначенияТиповыеСервер.ПолучитьЗначениеРеквизита(Организация, "Наименование"));
	
КонецПроцедуры // ОбновитьЗаголовок()

#КонецОбласти