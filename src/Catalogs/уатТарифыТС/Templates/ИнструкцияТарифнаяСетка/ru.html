<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head></head><body style="max-width:1000px; overflow-x: hidden; ::-webkit-scrollbar {width: 0px; background: transparent;}">
<h2>Инструкция по заполнению тарифной сетки.</h2>
<div>Данная инструкция описывает порядок создания табличных тарифов в программных продуктах “1С:Управление автотранспортом ПРОФ” и “1С:Транспортная логистика, экспедирование и управление автотранспортом КОРП”. </div>
<div>Для организации табличных тарифов используются тарифы с видом “Тарифная сетка”. Тарифы могут быть заполнены пользователем вручную либо загружены из файла Microsoft Excel. В данной инструкции описаны оба варианта заполнения.</div>
<div>
<h3>Добавление новых тарифов</h3>
<div>Для первоначального заполнении тарифов в информационной базе необходимо:</div>
<div>
<ol><li>Создать новый прейскурант или выбрать один из существующих прейскурантов;</li>
<li>Открыть форму прейскуранта и создать новый тариф;</li>
<li>В тарифе установить флаг “Тарифная сетка”, выбрать услугу, метод расчета и параметры расчета (например, параметр выработки для тарифов с методом расчета “По параметру выработки”), ввести наименование и записать созданный тариф;</li>
<li>Из формы тарифа по кнопке “Редактирование” открыть обработку «Редактирование тарифов» и заполнить необходимые настройки: группировки для сложных тарифов, области действия для тарифов, которые действую при определенных условиях. Заполнить стоимость в табличной части. Записать изменения.</li></ol></div>
<h3>Преобразование существующих тарифов в тарифную сетку</h3>
<div>При наличии в информационной базе большого количества тарифов с использованием отборов на закладке “Область действия” (далее по тексту - старые тарифы) рекомендуется преобразовать такие тарифы в тарифы с типом "Тарифная сетка" (далее по тексту - новые тарифы). Преобразование позволит существенно ускорить расчет стоимости услуг в документах.<br>Если старые тарифы должны существовать параллельно с новыми в информационной базе, то целесообразно новые тарифы добавить в новый прейскурант. Новый прейскурант следует ввести в действие с помощью документа “Установка прейскурантов ТС”. Для прейскуранта, который содержит старые тарифы необходимо прекратить действие путем установки даты окончания действия в документе “Установка прейскурантов ТС”. Таким образом, при редактировании документов “задним числом” будет возможно перезаполнение стоимости по старым тарифам, а для новых документов будут применяться новые тарифы.</div>
<div>Если использовать старые тарифы после ввода новых не требуется, то после настройки новых тарифов старые тарифы достаточно пометить на удаление. При этом новый создавать новый прейскурант для новых тарифов не нужно.</div>
<div>В новый тариф могут быть перенесены данные сразу из нескольких старых тарифов при условии совпадения метода и параметров расчетов. Например, если тарифы имеют метод расчета “По параметру выработки”, используется параметр выработки “Объем груза” и тарифы различаются между собой областью действия.</div>
<div>Преобразование может быть выполнено двумя способами:</div>
<div>
<ol><li>с помощью встроенной обработки “Преобразование тарифов в тарифную сетку”;</li>
<li>с помощью загрузки тарифов из файла Microsoft Excel.</li></ol></div>
<h3>Преобразование тарифов в тарифную сетку</h3>
<div>Необходимо перейти в подсистему “Услуги”, запустить обработку “Преобразование тарифов в тарифную сетку” и выполнить следующие действия:</div>
<div>
<ol><li>Выбрать прейскурант. Обработка тарифов ведется в пределах одного прейскуранта. При этом таблица "Тарифы" заполняется списком всех старых тарифов прейскуранта;</li>
<li>Перезаполнить список тарифов можно также по кнопке "Загрузить тарифы". Недоступные к обработке тарифы отмечаются серым цветом. К таким тарифам относятся:</li>
<ol><li>тарифы типа "Тарифная сетка",</li>
<li>сложные тарифы,</li>
<li>тарифы с методом расчета "Процентом от суммы",</li>
<li>тарифы с областью действия, не соответствующей ограничениям областей действия тарифных сеток. Область действия тарифной сетки ограничивается возможность использовать вид сравнения "Равно" или "Список" и запрещает использование групп отборов И, ИЛИ, НЕ.</li></ol><li>Требуемые тарифы нужно отметить флажками. Рекомендуется воспользоваться кнопкой "Установить все";</li>
<li>Запуск преобразования выполняется нажатием на кнопку "Создать новые тарифы". Алгоритм работы:</li>
<ol><li>по всем отмеченным старым тарифам формируются временные группировки [Услуга, Параметр выработки, Метод расчета, Условие применения фиксированного тарифа]</li>
<li>по каждой такой группировки создается один тариф типа "Тарифная сетка". В тарифную сетку попадают данные старых тарифов с одинаковым значением группировки [Услуга, Параметр выработки, Метод расчета, Условие применения фиксированного тарифа]</li></ol><li>После выполнения обработки колонка "Новый тариф" заполняется созданными тарифами. Созданных тарифов типа "Тарифная сетка" всегда не больше, чем старых тарифов. Выдается сообщение о количестве созданных тарифов.</li>
<li>Если обрабатываемых прейскурантов несколько, то нужно выполнить пункты 1-5 по каждому прейскуранту.</li>
<li>Старые тарифы, по которым созданы новые, помечаются на удаление.</li></ol></div>
<h3>Загрузка тарифов из файла Microsoft Excel</h3>
<div>Рассмотрим создание нового тарифа на примере настроенных в демо-базе тарифов с областями действия для перевозчика “Южные авиалинии” и прейскуранта «Авиаперевозки Южные авиалинии».<br>Новый тариф вида “Тарифная сетка” создадим в действующем прейскуранте. Для этого необходимо выполнить следующие действия:</div>
<div>
<ol><li>Найти прейскурант перевозчика в списке прейскурантов и активизировать строку с прейскурантом с помощью мыши. Табличная часть в нижней части формы будет заполнена списком тарифов, входящих в состав выбранного прейскуранта. Активизировать строку с одним из старых тарифов. По кнопке “Редактирование” открыть форму обработки “Редактирование тарифов”.<br><br><img src="_files/pasted image 1.png" width="700"></img><br><br></li>
<li>В открывшемся окне обработки будут заполнены все тарифы данного прейскуранта с аналогичными параметрами расчета.<br><br><img src="_files/pasted image 2.png" width="700"></img><br><br></li>
<li>На командной панели обработки в подменю “Excel” расположены команды для выгрузки и загрузки данных в файл Microsoft Excel. Нажать на кнопку «Выгрузить», выбрать путь и выполнить выгрузку данных в файл №1. Проверить, что все строки и столбцы табличной части выгружены в файл. На рисунке ниже представлен пример файла выгрузки.<br><br><img src="_files/pasted image 3.png" width="700"></img><br><br></li>
<li>В обработке «Редактирование тарифов» установить флаг «Тарифная сетка». На вопрос об очистке табличной части ответить «Да». Табличная часть и некоторые параметры расчета будут очищены. Необходимо проверить значения в заполненных параметрах и заполнить недостающие параметры. Например, поле “Услуга” следует заполнить вручную. </li>
<li>По кнопке «Добавить область» добавить области действия, которые использовались в старых тарифах.<br><br><img src="_files/pasted image 4.png" width="700"></img><br><br></li>
<li>Нажать на кнопку «Выгрузить», выбрать путь и выполнить выгрузку данных в файл №2. Проверить, что файл не содержит каких-либо данных, кроме шапки.</li>
<li>Структура файла №2 соответствует структуре нового тарифа. Необходимо вручную заполнить содержимое файла №2 путем копированием строк из файла №1.</li>
<li>В подменю “Excel” нажать на кнопку «Загрузить» и выбрать для загрузки файл №2. После загрузки данные в табличной части на форме обработки будут заполнены из файла.<br>На рисунке ниже представлен пример формы обработки с заполненными данными.<br><img src="_files/pasted image 5.png" width="700"></img></li>
<li>Проверить правильность загруженных данных и нажать кнопку “Записать”. При необходимости заполнить вручную данные в тех ячейках, которые не были заполнены автоматически при загрузке. </li>
<li>Ввести в действие новые тарифы. При необходимости пометить на удаление или ввести срок окончания действия для существующих тарифов. Для этого выполнить действия, описанные в начале текущего раздела инструкции.</li></ol></div>
<div>Данный сценарий также может применяться для первоначального заполнения тарифов в информационной базе на основании заранее подготовленных прейскурантов в виде файлов Microsoft Excel. </div></div></body></html>