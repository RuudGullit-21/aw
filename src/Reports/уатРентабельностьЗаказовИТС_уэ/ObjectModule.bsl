
#Область ОбработчикиСобытий

Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	ДокументРезультат.Очистить();
	
	СхемаКомпоновкиДанных = ПолучитьМакет("ОсновнаяСхемаКомпоновкиДанных");
	НастройкиКомпоновщикаНастроек = КомпоновщикНастроек.ПолучитьНастройки();
	
	тблДанныеОРентабельности = уатОбщегоНазначения_уэ.ПолучитьДанныеОРентабельностиЗаказовИТС(
		НастройкиКомпоновщикаНастроек.ПараметрыДанных.Элементы.Найти("ПериодОтчета").Значение.ДатаНачала,
		НастройкиКомпоновщикаНастроек.ПараметрыДанных.Элементы.Найти("ПериодОтчета").Значение.ДатаОкончания,,,
		НастройкиКомпоновщикаНастроек.ПараметрыДанных.Элементы.Найти("РаспределятьНаРБП").Значение); 
		
	//Колонка_СуммаЗатратБезНДС = тблДанныеОРентабельности.Колонки.Найти("СуммаЗатратБезНДС");
	//Если Колонка_СуммаЗатратБезНДС <> Неопределено Тогда
	//	Колонка_СуммаЗатратБезНДС.Имя = "СуммаРасходовБезНДС";
	//КонецЕсли;
	
	ВнешниеНаборыДанных = Новый Структура;
	ВнешниеНаборыДанных.Вставить("ТабДанных", тблДанныеОРентабельности);
	
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	МакетКомпоновки   = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, НастройкиКомпоновщикаНастроек, ДанныеРасшифровки);
	
	ПроцессорКомпоновкиДанных = Новый ПроцессорКомпоновкиДанных;
	ПроцессорКомпоновкиДанных.Инициализировать(МакетКомпоновки, ВнешниеНаборыДанных, ДанныеРасшифровки, Истина);
	
	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
	ПроцессорВывода.УстановитьДокумент(ДокументРезультат);
	ПроцессорВывода.Вывести(ПроцессорКомпоновкиДанных);
	
КонецПроцедуры

#КонецОбласти
